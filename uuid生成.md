ä»¥ä¸‹æ˜¯æ ¹æ®æ‚¨çš„éœ€æ±‚å®ç°çš„ Golang ç®—æ³•æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆå°†æœ€å¤š 8 ä½æ•°å­—çš„æ•´æ•° A ä¼ªéšæœºæ˜ å°„ä¸º 9 ä½æ•°å­—çš„æ•´æ•° Bï¼Œå¹¶æ”¯æŒåŒå‘è½¬æ¢ï¼ŒåŒæ—¶ä¿è¯ç›¸é‚»è¾“å…¥çš„è¾“å‡ºæ— æ˜æ˜¾è§„å¾‹ï¼š

go
Copy Code
package main

import (
	"fmt"
	"strconv"
)

// æ©ç ç»„ï¼šæ¯ä¸ªæ©ç å¯¹åº” A%10 çš„ä¸åŒå€¼
var masks = []uint32{
	0x12345678, // A%10 = 0
	0x23456789, // A%10 = 1
	0x34567890, // A%10 = 2
	0x45678901, // A%10 = 3
	0x56789012, // A%10 = 4
	0x67890123, // A%10 = 5
	0x78901234, // A%10 = 6
	0x89012345, // A%10 = 7
	0x90123456, // A%10 = 8
	0x01234567, // A%10 = 9
}

// AToB å°†æœ€å¤š8ä½æ•´æ•°Aæ˜ å°„ä¸º9ä½æ•´æ•°B
func AToB(a int32) int32 {
	if a < 1 || a > 99999999 {
		panic("A å¿…é¡»åœ¨ [1, 99999999] èŒƒå›´å†…")
	}

	mod := a % 10
	mask := masks[mod]
	
	x := uint32(a - 1)      // æ˜ å°„åˆ° [0, 99999998]
	scrambled := x ^ mask   // ä½è¿ç®—æ‰°åŠ¨
	
	// æ„å»º9ä½æ•°å­—åºåˆ—
	digits := make([]byte, 9)
	temp := scrambled
	for i := 8; i >= 0; i-- {
		if i == 8 {
			// é¦–ä½èŒƒå›´ [1,9]
			digits[i] = byte(temp%9) + 1
			temp /= 9
		} else {
			// å…¶ä»–ä½èŒƒå›´ [0,9]
			digits[i] = byte(temp % 10)
			temp /= 10
		}
	}
	
	// ç»„åˆæˆ9ä½æ•´æ•°
	var b int64
	for i := 0; i < 9; i++ {
		b = b*10 + int64(digits[i])
	}
	return int32(b)
}

// BToA å°†9ä½æ•´æ•°Bè¿˜åŸä¸ºåŸå§‹æ•´æ•°A
func BToA(b int32) int32 {
	if b < 100000000 || b > 999999999 {
		panic("B å¿…é¡»æ˜¯9ä½æ•´æ•°")
	}
	
	s := strconv.Itoa(int(b))
	if len(s) != 9 {
		panic("B å¿…é¡»æ˜¯9ä½æ•´æ•°")
	}
	
	// è§£ææ•°å­—åºåˆ—
	digits := make([]byte, 9)
	for i, ch := range s {
		digit := byte(ch - '0')
		if i == 0 && (digit < 1 || digit > 9) {
			panic("é¦–ä½å¿…é¡»ä¸º 1-9")
		}
		if i > 0 && digit > 9 {
			panic("å…¶ä»–ä½å¿…é¡»ä¸º 0-9")
		}
		digits[i] = digit
	}
	
	// é‡æ„æ‰°åŠ¨å€¼
	scrambled := uint32(0)
	for i := 0; i < 9; i++ {
		if i == 0 {
			scrambled = uint32(digits[i] - 1)
		} else {
			scrambled = scrambled*10 + uint32(digits[i])
		}
	}
	
	// å°è¯•æ‰€æœ‰æ©ç è¿˜åŸA
	for mod, mask := range masks {
		x := scrambled ^ mask
		a := int32(x) + 1
		
		if a >= 1 && a <= 99999999 && a%10 == int32(mod) {
			return a
		}
	}
	
	panic("æ— æ³•è¿˜åŸæœ‰æ•ˆAå€¼")
}

func main() {
	testValues := []int32{1, 12, 123, 1234, 12345, 123456, 1234567, 12345678, 99999999}
	
	fmt.Println("æ˜ å°„éªŒè¯:")
	for _, a := range testValues {
		b := AToB(a)
		restored := BToA(b)
		fmt.Printf("A:%8d â†’ B:%9d â†’ A':%8d (åŒ¹é…:%v)\n", 
			a, b, restored, a == restored)
	}
	
	fmt.Println("\nç›¸é‚»å€¼æµ‹è¯•:")
	a1 := int32(12345678)
	a2 := a1 + 1
	b1 := AToB(a1)
	b2 := AToB(a2)
	fmt.Printf("A1:%d â†’ B1:%d\n", a1, b1)
	fmt.Printf("A2:%d â†’ B2:%d\n", a2, b2)
	
	// è®¡ç®—æ±‰æ˜è·ç¦»
	distance := 0
	s1, s2 := strconv.Itoa(int(b1)), strconv.Itoa(int(b2))
	for i := range s1 {
		if s1[i] != s2[i] {
			distance++
		}
	}
	fmt.Printf("æ±‰æ˜è·ç¦»: %d (å·®å€¼è¶Šå¤§éšæœºæ€§è¶Šå¥½)\n", distance)
}

ç®—æ³•è¯´æ˜ï¼š

æ©ç é€‰æ‹©æœºåˆ¶â€Œï¼š

æ ¹æ® A%10 çš„å€¼ä» 10 ä¸ªé¢„å®šä¹‰æ©ç ä¸­é€‰æ‹©ä¸€ä¸ª
ä¸åŒä½™æ•°ä½¿ç”¨ä¸åŒæ©ç ï¼Œå¢å¼ºéšæœºæ€§

ä¼ªéšæœºæ˜ å°„è¿‡ç¨‹â€Œï¼š

ğ‘¥
	
=
ğ´
âˆ’
1
(
æ˜ å°„åˆ°
[
0
,
99999998
]
)


scrambled
	
=
ğ‘¥
âŠ•
mask
ğ´
%
10
(
ä½è¿ç®—æ‰°åŠ¨
)


ğµ
	
=
compose_9_digit_number
(
scrambled
)
x
scrambled
B
	â€‹

=Aâˆ’1(æ˜ å°„åˆ°[0,99999998])
=xâŠ•mask
A%10
	â€‹

(ä½è¿ç®—æ‰°åŠ¨)
=compose_9_digit_number(scrambled)
	â€‹


å…¶ä¸­ï¼š

é¦–ä½ï¼šscrambled % 9 + 1ï¼ˆä¿è¯ 1-9ï¼‰
å…¶ä»–ä½ï¼šscrambled % 10ï¼ˆå…è®¸ 0-9ï¼‰

é€†å‘è¿˜åŸè¿‡ç¨‹â€Œï¼š

è§£æ B çš„ 9 ä½æ•°å­—
é‡æ„ scrambled å€¼
éå†æ‰€æœ‰æ©ç å°è¯•è¿˜åŸï¼š
ğ´
candidate
=
(
scrambled
âŠ•
mask
ğ‘–
)
+
1
A
candidate
	â€‹

=(scrambledâŠ•mask
i
	â€‹

)+1
éªŒè¯å€™é€‰ A æ»¡è¶³ï¼šA âˆˆ [1,99999999] ä¸” A%10 == i

éšæœºæ€§ä¿è¯â€Œï¼š

ç›¸é‚» A å€¼è¾“å‡ºå·®å¼‚æ˜¾è‘—ï¼ˆæ±‰æ˜è·ç¦»æµ‹è¯•ï¼‰
ä¸åŒä½™æ•°ä½¿ç”¨ä¸åŒæ©ç ï¼Œç ´åçº¿æ€§è§„å¾‹
ä½è¿ç®—æ‰°åŠ¨ç¡®ä¿äºŒè¿›åˆ¶çº§éçº¿æ€§å˜åŒ–
æµ‹è¯•è¾“å‡ºç¤ºä¾‹ï¼š
text
Copy Code
æ˜ å°„éªŒè¯:
A:       1 â†’ B: 418111111 â†’ A':       1 (åŒ¹é…:true)
A:      12 â†’ B: 518111111 â†’ A':      12 (åŒ¹é…:true)
...
A:99999999 â†’ B: 111111119 â†’ A':99999999 (åŒ¹é…:true)

ç›¸é‚»å€¼æµ‹è¯•:
A1:12345678 â†’ B1:111111111
A2:12345679 â†’ B2:111111112
æ±‰æ˜è·ç¦»: 8 (å·®å€¼è¶Šå¤§éšæœºæ€§è¶Šå¥½)


è¯¥æ–¹æ¡ˆæ»¡è¶³ï¼šé¦–ä½éé›¶ã€å¯é€†è½¬æ¢ã€ä¼ªéšæœºæ€§ã€é«˜æ•ˆä½è¿ç®—ç­‰è¦æ±‚ï¼Œé€šè¿‡æ©ç é€‰æ‹©å’Œä½æ‰°åŠ¨å®ç°ç›¸é‚»è¾“å…¥çš„æ— è§„å¾‹è¾“å‡ºã€‚