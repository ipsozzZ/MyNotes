# Java混合编程
计算机中有很多的编程语言，各有各的特色和应用范围。Java混合编程就是Java程序和其它应用程序进行通讯和数据交互

## # Java跨虚拟机调用Java程序
一个jvm上的程序调用另一个jvm上的程序

1. RMI编程
RMI（Remote Method Invocation，远程方法调用）：两个位于不同JVM虚拟机的Java程序互相请求访问

2. JNI编程
- 在Java中声明一个本地方法如：
```java

package live.ipso;
class HelloNative{
    public static native void greeting(); // 申明为native方法不需要有实现体，而是需要使用c语言来实现这个方法
} 
```
- 调用javac.exe编译，得到HelloNative.class
- 调用javah.exe（javah.exe也是jdk自带的）得到包含该方法（Java_live_ipso_HelloNative_greeting()）的头文件HelloNative.h
- 实现.c文件（对应HelloNative.h）
- 将.c和.h文件，整合为共享库(DLL)文件
- 在Java类中，加载响应的共享库文件

```java

package ipso.JNI;

public class JNITest {
    public static native int sum(int num1, int num2);

    public static void main(String[] args) {
        System.loadLibrary("JNITest");   // dll名字
        JNITest test = new JNITest();
        int sum = test.sum(3, 4);
        System.out.println("使用c语言求得两数和为：" + sum);
    }
}

// 使用cmd工具并cd到项目目录下，使用命令javah -cp [字节码目录(不包括包名)] [包名+class名] 得到如下文件

// 经过上一步操作得到如下ipso_JNI_JNITest.h C语言头文件
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class ipso_JNI_JNITest */

#ifndef _Included_ipso_JNI_JNITest
#define _Included_ipso_JNI_JNITest
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     ipso_JNI_JNITest
 * Method:    sum
 * Signature: (II)I
 */
JNIEXPORT jint JNICALL Java_ipso_JNI_JNITest_sum
  (JNIEnv *, jclass, jint, jint);   // 将这里复制到.c C语言文件中并实现该方法的逻辑体

#ifdef __cplusplus
}
#endif
#endif


// 编写ipso_JNI_JNITest.c文件用来实现程序逻辑如下：
// 这是ipso_JNI_JNITest.c文件
##include "ipso_JNI_JNITest_sum.h"
JNIEXPORT jint JNICALL Java_ipso_JNI_JNITest_sum(JNIEnv *env, jobject obj, jint num1, jint num2){
    return num1 + num2;
}

void main(){}

// 将上面的.c文件使用gcc编译成共享文件库.dll(windows上)文件或者.so(Linux上)文件， 注意共享文件库的32/64位要于JDK的32/64位相匹配
// gcc编译成dll文件的命令可以搜索，除了gcc也可以用其它的c语言编译工具编译成共享文件库文件。
// 到这里JNITest类中的sum方法就可以享普通Java方法一样使用了。

```
